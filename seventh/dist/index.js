(()=>{"use strict";var e={369:e=>{e.exports=require("excel4node")},605:e=>{e.exports=require("http")},750:e=>{e.exports=require("puppeteer")},395:e=>{e.exports=require("socket.io")}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{require("@babel/polyfill");const e=require("express");var t=n.n(e);const r=require("path");var o=n.n(r);const a=require("react");var c=n.n(a);const i=require("react-dom/server");var u=n.n(i);const s=require("react-router-dom"),l=require("cors");var p=n.n(l),f="START_CRAWL_DATA",m="GET_NUMBER_INFORMATION",d="GET_NUMBER_INFORMATION_SUCCESS",v="GET_LENGHT_LIST";const g=require("read-excel-file");var h=n.n(g);require("file-saver"),require("xlsx");const y=require("react-redux"),x=require("react-datepicker");var w=n.n(x);const b=require("date-fns/locale/vi");var E=n.n(b);function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);c=!0);}catch(e){i=!0,o=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return P(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?P(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function k(){var e,t,n=O((0,a.useState)(1),2),r=(n[0],n[1],O((0,a.useState)(!1),2)),o=r[0],i=r[1],u=O((0,a.useState)(""),2),s=u[0],l=u[1],p=O((0,a.useState)(!1),2),m=p[0],d=p[1],g=O((0,a.useState)(new Date),2),x=g[0],b=g[1],E=(0,y.useDispatch)(),P=(0,y.useSelector)((function(e){return e.home.listPhone})),k=(0,y.useSelector)((function(e){return e.home.phoneNumberChecking})),T=(0,y.useSelector)((function(e){return e.home.sumIndex})),S=(0,y.useSelector)((function(e){return e.home.isCrawlDone}));return(0,a.useEffect)((function(){i(!S)}),[S]),c().createElement("div",{className:"crawl-login",id:"div_craw"},c().createElement("div",{style:{position:"absolute",top:"20px",fontSize:"36px",fontWeight:"600"}},"BÁO CÁO TIÊU DÙNG - NẠP THẺ"),o?null:c().createElement("div",null,c().createElement("div",{className:"crawl-login"},c().createElement("div",{className:"input-add-div"},c().createElement("div",{className:"title-input"},"Thời gian"),c().createElement(w(),{className:"input-add",showMonthYearPicker:!0,dateFormat:"MM/yyyy",locale:"vi",selected:x,onChange:function(e){b(e)}})),c().createElement("div",{id:"crawl_login_file_input_up"},c().createElement("label",{htmlFor:"xlsx"},"Bấm vào đây để chọn tệp(excel)"),c().createElement("input",{type:"file",id:"xlsx",name:"xlsx",accept:"xlsx",onChange:function(e){var t,n,r=e.target.files[0].name;l(r),t=e.target.files[0],n=function(e){i(!0),E({type:v,data:{sumIndex:e.length}}),e.forEach((function(t,n){if(n>0){var o={index:n,phone:t[0]};P.push(o)}n==e.length-1&&(console.log("data - endoflist",t[0]," ",t[1]," listPhone",P),E({type:f,data:{listPhone:P,nameFile:r.substring(0,r.length-5),startDate:x.getFullYear()+"+"+(x.getMonth()+1)}}),d(!0))}))},h()(t).then((function(e){n(e)})),e.target.value=null}}),c().createElement("span",{id:"span_file_input_error"}))),S&&m?c().createElement("div",{style:{position:"absolute",bottom:"10px",left:"50%",width:"100%",transform:"translate(-50%, 10px)"},className:"tracking-index-number-upper"},c().createElement("text",null,"Tra cứu thành công , tên tệp đã tra cứu là ",c().createElement("span",{style:{color:"green"}},s))):null),o?c().createElement("div",null,c().createElement("div",{className:"animation-tracking"},c().createElement("div",{className:"crawl-loading-parent",id:"div_loginin_loading"},c().createElement("div",{className:"crawl-login-loading"},c().createElement("div",{className:"circle"}),c().createElement("div",{className:"circle"}),c().createElement("div",{className:"circle"}),c().createElement("div",{className:"shadow"}),c().createElement("div",{className:"shadow"}),c().createElement("div",{className:"shadow"})))),c().createElement("div",null,c().createElement("div",{className:"tracking-index-number-upper"},c().createElement("text",null,"Đang tra cứu tệp ",c().createElement("span",{style:{color:"green"}},s))),c().createElement("div",{className:"tracking-index-number-upper"},c().createElement("text",{style:{textAlign:"center"}},"Đang tra cứu tới số thứ ",k.index)),c().createElement("div",{className:"tracking-index-number-bellow"},c().createElement("text",null,"Hoàn thành ",(e=k.index,t=T,console.log("sum ",t),(e/t*100).toFixed(2)),"%")))):null)}(0,x.registerLocale)("vi",E());var T="LOGIN",S="OPEN_OTP_SCREEN",N="LOGIN_ERROR",_="LOGGINGIN";function R(e){var t=(0,y.useDispatch)(),n="",r="",o=(0,s.useHistory)(),i=(0,y.useSelector)((function(e){return e.login})),u=i.isSomethingError,l=i.isLoginSuccess,p=i.loginError,f=i.logginin;return(0,a.useEffect)((function(){console.log("is success",l),l&&o.push("/otp")}),[l]),c().createElement("div",null,c().createElement("div",{className:"crawl-login",id:"crawl_login"},c().createElement("div",{className:"crawl-login-username-password"},c().createElement("div",{className:"crawl-login-username-password-upper"},c().createElement("span",null,"Tên đăng nhập")),c().createElement("div",{className:"crawl-login-username-password-below"},c().createElement("input",{type:"text",id:"username",placeholder:"Nhập tên đăng nhập",onChange:function(e){n=e.target.value}}))),c().createElement("div",{className:"crawl-login-username-password"},c().createElement("div",{className:"crawl-login-username-password-upper"},c().createElement("span",null,"Mật khẩu")),c().createElement("div",{className:"crawl-login-username-password-below"},c().createElement("input",{type:"password",id:"password",placeholder:"Nhập mật khẩu",onChange:function(e){r=e.target.value}}))),0==f?c().createElement("div",{className:"crawl-login-button-submit",id:"crawl_login_button_submit",onClick:function(){t({type:T,data:{username:n,password:r}})}},c().createElement("span",null,"Đăng nhập")):c().createElement("div",{className:"crawl-loading-parent",id:"div_loginin_loading"},c().createElement("div",{className:"crawl-login-loading"},c().createElement("div",{className:"circle"}),c().createElement("div",{className:"circle"}),c().createElement("div",{className:"circle"}),c().createElement("div",{className:"shadow"}),c().createElement("div",{className:"shadow"}),c().createElement("div",{className:"shadow"}),c().createElement("span",null,"Đang đăng nhập ..."))),1==u?c().createElement("div",{className:"crawl-login-success-contain"},c().createElement("h4",{id:"crawl_login_error_text"},p)):null))}var j="OPEN_HOME_SCREEN",C="OTP_CHECKING",I="IS_OTP_VERIFYING",D="OTP_STATUS",A="OTP_TIMEOUT";const M=require("react-router");function q(e){var t=(0,y.useDispatch)(),n="",r=(0,M.useHistory)(),o=(0,y.useSelector)((function(e){return e.otp})),i=o.isOtpSuccess,u=o.isVerifyingOTP,s=o.otpStatus,l=o.isTimeout;return(0,a.useEffect)((function(){console.log("is otp success",i),i&&r.push("/home")}),[i]),(0,a.useEffect)((function(){console.log("otp timeout"),l&&setTimeout((function(){r.push("/")}),1e3)}),[l]),c().createElement("div",null,c().createElement("div",{className:"crawl-otp"},c().createElement("div",{className:"crawl-otp-input"},c().createElement("div",{className:"crawl-otp-input-upper"},c().createElement("span",null,"OTP")),c().createElement("div",{className:"crawl-otp-input-below"},c().createElement("input",{type:"text",id:"otp",placeholder:"Nhập mã OTP",onChange:function(e){console.log("input otp",e.target.value),n=e.target.value}}))),u?c().createElement("div",{className:"crawl-loading-parent",id:"div_loginin_loading"},c().createElement("div",{className:"crawl-login-loading"},c().createElement("div",{className:"circle"}),c().createElement("div",{className:"circle"}),c().createElement("div",{className:"circle"}),c().createElement("div",{className:"shadow"}),c().createElement("div",{className:"shadow"}),c().createElement("div",{className:"shadow"}),c().createElement("span",null,"Đang xác thực OTP ..."))):c().createElement("div",{className:"crawl-otp-button-submit",id:"crawl_otp_button_submit",onClick:function(){t({type:C,data:{otpchecking:n}})}},c().createElement("span",null,"Xác thực OTP")),""!=s?c().createElement("h3",null,s):null))}var L="login",F="login-status",G="SOCKET_LOGIN_INCORRECT",H="SOCKET_SOMETHING_ERROR",W="SOCKET_OTP",$="SOCKET_OTP_STATUS",K="SOCKET_OTP_INCORRECT",U="SOCKET_WORKING_START_CRAWL_DATA",B="SOCKET_WORKING_CRAWLED_ITEM_DATA",z="SOCKET_CRAWLED_DONE",V="http://localhost:6786";function Y(e){return(Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function J(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function X(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Q(e,t){return(Q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Z(e,t){return!t||"object"!==Y(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ee(e){return(ee=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const te=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Q(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ee(r);if(o){var n=ee(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Z(this,e)});function i(){return J(this,i),a.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){return c().createElement("div",null,c().createElement(s.Route,{exact:!0,path:"/",component:R}),c().createElement(s.Route,{path:"/home",component:k}),c().createElement(s.Route,{path:"/otp",component:q}))}}])&&X(t.prototype,n),i}(c().Component),ne=require("redux-saga");var re=n.n(ne);const oe=require("redux");function ae(e){return function(e){if(Array.isArray(e))return ce(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return ce(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ce(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ce(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ue(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(n),!0).forEach((function(t){se(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ie(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function se(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var le={something:void 0,listPhone:[],phoneNumberChecking:{index:"",phone:""},sumIndex:"",isCrawlDone:!0};function pe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pe(Object(n),!0).forEach((function(t){me(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function me(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var de={logginin:!1,isSomethingError:!1,isLoginSuccess:!1,username:"",password:"",loginStatusText:"Đang đăng nhập",loginError:""};function ve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ge(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ve(Object(n),!0).forEach((function(t){he(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ve(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function he(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}new Map([["1",function(){}],["2",function(){}]]);var ye={isOtpSuccess:!1,isSomethingError:!1,otpError:"",otp_code:"",otpCheking:"",isVerifyingOTP:!1,otpStatus:"",isTimeout:!1};const xe=(0,oe.combineReducers)({login:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:de,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S:return fe(fe({},e),{},{isLoginSuccess:!0});case N:return fe(fe({},e),{},{loginError:t.value,isSomethingError:!0});case _:return fe(fe({},e),{},{logginin:t.value});default:return fe({},e)}},home:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:console.log("sum index",t.data.sumIndex);var n=ue({},e.sumIndex);return n=t.data.sumIndex,ue(ue({},e),{},{sumIndex:n-1});case f:var r=ae(e.listPhone);return r=t.data.listPhone,ue(ue({},e),{},{listPhone:r});case m:console.log("phone ",t.data.index," ",t.data.phone);var o=ue({},e.phoneNumberChecking);return o.index=t.data.index,o.phone=t.data.phone,ue(ue({},e),{},{phoneNumberChecking:o});case d:return ue(ue({},e),{},{isCrawlDone:t.data,listPhone:[]});default:return ue({},e)}},otp:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ye,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j:return ge(ge({},e),{},{isOtpSuccess:!0});case I:return ge(ge({},e),{},{isVerifyingOTP:t.value});case C:return console.log("otp checking from client",t.data),ge(ge({},e),{},{otpCheking:t.data.otpcheking});case D:return ge(ge({},e),{},{otpStatus:t.value});case A:return ge(ge({},e),{},{isTimeout:t.value});default:return ge({},e)}}}),we=require("redux-saga/effects"),be=require("socket.io-client");var Ee=n.n(be);const Oe=function e(t){return e.instance=Ee().connect(t),{receive:function(t,n){e.instance.on(t,(function(e){n(e)}))},send:function(t,n){e.instance.emit(t,n)}}};var Pe=new Oe(V),ke=function(e){return console.log("loginSocket",e),(0,ne.eventChannel)((function(t){return Pe.send(L,{username:e.data.username,password:e.data.password}),Pe.receive(G,(function(e){console.log("from server",e),t(e)})),Pe.receive(F,(function(e){console.log("from server",e),t(e)})),Pe.receive(H,(function(e){console.log("from server",e),t(e)})),function(){}}))},Te=regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,we.put)({type:_,value:!0});case 2:return e.next=4,(0,we.call)(ke,t);case 4:n=e.sent;case 5:return e.next=8,(0,we.take)(n);case 8:if(!(r=e.sent)){e.next=21;break}if(console.log("responce",r),1!=r.data){e.next=16;break}return e.next=14,(0,we.put)({type:S});case 14:e.next=19;break;case 16:if(-1!=r.data){e.next=19;break}return e.next=19,(0,we.put)({type:N,value:"Đăng nhập lỗi, hãy thử lại"});case 19:return e.next=21,(0,we.put)({type:_,value:!1});case 21:e.next=5;break;case 23:case"end":return e.stop()}}),e)})),Se=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,we.takeLatest)(T,Te);case 2:case"end":return e.stop()}}),e)})),Ne=new Oe(V),_e=function(e){return console.log("startCrawlDataSocket",e.data),(0,ne.eventChannel)((function(t){return Ne.send(U,{listPhone:e.data.listPhone,nameFile:e.data.nameFile,startDate:e.data.startDate}),Ne.receive(B,(function(e){console.log("crawl item home.saga from server",e),t(e||"")})),Ne.receive(z,(function(e){console.log("crawl done",e),t(e||"")})),function(){}}))},Re=regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,we.call)(_e,t);case 2:return n=e.sent,e.next=5,(0,we.put)({type:d,data:!1});case 5:return e.next=8,(0,we.take)(n);case 8:if(!(r=e.sent)){e.next=18;break}if(2!=r.data){e.next=15;break}return e.next=13,(0,we.put)({type:d,data:!0});case 13:e.next=18;break;case 15:return console.log("respone",r),e.next=18,(0,we.put)({type:m,data:r});case 18:e.next=5;break;case 20:case"end":return e.stop()}}),e)})),je=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,we.takeLatest)(f,Re);case 2:case"end":return e.stop()}}),e)})),Ce=new Oe(V),Ie=function(e){return console.log("otpSocket",e),(0,ne.eventChannel)((function(t){return console.log("otp send to server, ",e.data.otpchecking),Ce.send(W,{otp:e.data.otpchecking}),Ce.receive(K,(function(e){console.log("from server",e),t(e)})),Ce.receive($,(function(e){console.log("from server",e),t(e)})),Ce.receive(H,(function(e){console.log("from server",e),t(e)})),function(){}}))},De=regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,we.call)(Ie,t);case 2:return n=e.sent,e.next=5,(0,we.put)({type:I,value:!0});case 5:return e.next=7,(0,we.put)({type:D,value:""});case 7:return e.next=10,(0,we.take)(n);case 10:if(!(r=e.sent)){e.next=35;break}return console.log("responce",r),e.next=15,(0,we.put)({type:I,value:!1});case 15:if(1!=r.data){e.next=20;break}return e.next=18,(0,we.put)({type:j});case 18:e.next=35;break;case 20:if(-1!=r.data){e.next=25;break}return e.next=23,(0,we.put)({type:D,value:"Lỗi mạng, vui lòng kiểm tra lại kết nối và mở lại phần mềm"});case 23:e.next=35;break;case 25:if(3!=r.data){e.next=32;break}return e.next=28,(0,we.put)({type:D,value:"OTP đã hết hạn, vui lòng  đăng nhập lại ..."});case 28:return e.next=30,(0,we.put)({type:OTP_TIMEOUT,value:!0});case 30:e.next=35;break;case 32:if(4!=r.data){e.next=35;break}return e.next=35,(0,we.put)({type:D,value:"Nhập sai OTP, vui lòng thử lại"});case 35:e.next=7;break;case 37:case"end":return e.stop()}}),e)})),Ae=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,we.takeLatest)(C,De);case 2:case"end":return e.stop()}}),e)})),Me=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,(0,we.take)("*");case 3:return e.sent,e.next=6,(0,we.select)();case 6:e.sent,e.next=0;break;case 9:case"end":return e.stop()}}),e)}));const qe=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,we.all)([Me(),Se(),Ae(),je()]);case 2:case"end":return e.stop()}}),e)}));function Le(e,t,n,r,o,a,c){try{var i=e[a](c),u=i.value}catch(e){return void n(e)}i.done?t(u):Promise.resolve(u).then(r,o)}function Fe(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function c(e){Le(a,r,o,c,i,"next",e)}function i(e){Le(a,r,o,c,i,"throw",e)}c(void 0)}))}}function Ge(e,t){return He.apply(this,arguments)}function He(){return(He=Fe(regeneratorRuntime.mark((function e(t,n){var r,a,i,l,p,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r={},a=re()(),i={},l=(0,oe.createStore)(xe,i,(0,oe.applyMiddleware)(a)),p=l.getState(),f=u().renderToString(c().createElement(y.Provider,{store:l},c().createElement(s.StaticRouter,{location:t.url,context:r},c().createElement(s.Switch,null,c().createElement(te,null)))));try{n.sendFile(o().resolve(__dirname,"public/index.html"),{title:"Hello",component:f,preloadedState:p})}catch(e){console.error(e)}return e.next=10,a.run(qe);case 10:e.sent;case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function We(e,t,n,r,o,a,c){try{var i=e[a](c),u=i.value}catch(e){return void n(e)}i.done?t(u):Promise.resolve(u).then(r,o)}const $e=function(){var e,t=(e=regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("url",t.url),Ge(t,n);case 2:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function c(e){We(a,r,o,c,i,"next",e)}function i(e){We(a,r,o,c,i,"throw",e)}c(void 0)}))});return function(e,n){return t.apply(this,arguments)}}(),Ke=function e(t){return e.io=n(395)(t),console.log("socketServer"),{receive:function(t){e.io.on("connection",(function(e){t(e)}))},send:function(t,n){e.io.emit(t,n)}}};var Ue="https://smrs.vnpt.vn/Dashboard/ReportExtent/ReportExtent",Be="https://id.vnpt.com.vn/cas/login?service=https%3a%2f%2fsmrs.vnpt.vn%2fDashboard%2fReportExtent%2fReportExtent";function ze(e,t,n,r,o,a,c){try{var i=e[a](c),u=i.value}catch(e){return void n(e)}i.done?t(u):Promise.resolve(u).then(r,o)}function Ve(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function c(e){ze(a,r,o,c,i,"next",e)}function i(e){ze(a,r,o,c,i,"throw",e)}c(void 0)}))}}function Ye(e){return e=null==e?2e3:e,new Promise((function(t){return setTimeout(t,e)}))}function Je(){return(Je=Ve(regeneratorRuntime.mark((function e(t,n,r,o,a){var c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("username ",t,"password",n),e.next=4,o.goto(Be);case 4:return c="#username",e.next=7,o.$eval(c,(function(e,t){return e.value=t}),t);case 7:return c="#password",e.next=10,o.$eval(c,(function(e,t){return e.value=t}),n);case 10:return c="#fm1 > section > button",e.next=13,Promise.all([o.click(c)]);case 13:return e.next=15,Ye(2e3);case 15:return e.next=17,o.$$eval("body #ctl01 .page .main .failureNotification",(function(e){return e.map((function(e){return e.innerHTML}))}));case 17:if(!(e.sent.length>0)){e.next=21;break}return r.send(G,{data:-1}),e.abrupt("return");case 21:return e.next=23,o.bringToFront();case 23:return e.next=25,o.evaluate("setInterval(()=>{document.querySelector('#passOTP')},500)");case 25:return e.next=27,o.waitForFunction('document.querySelector("#passOTP") != null');case 27:r.send(F,{data:1}),e.next=35;break;case 30:e.prev=30,e.t0=e.catch(0),console.log("Login Error",e.t0),r.send(G,{data:-1}),r.send(H,{data:0});case 35:case"end":return e.stop()}}),e,null,[[0,30]])})))).apply(this,arguments)}const Xe=function(e,t,n,r,o){return Je.apply(this,arguments)};function Qe(e,t,n,r,o,a,c){try{var i=e[a](c),u=i.value}catch(e){return void n(e)}i.done?t(u):Promise.resolve(u).then(r,o)}function Ze(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function c(e){Qe(a,r,o,c,i,"next",e)}function i(e){Qe(a,r,o,c,i,"throw",e)}c(void 0)}))}}function et(e){return e=null==e?2e3:e,new Promise((function(t){return setTimeout(t,e)}))}function tt(){return(tt=Ze(regeneratorRuntime.mark((function e(t,n,r){var o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("otp ",t),r.on("dialog",function(){var e=Ze(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t.message()),e.next=3,t.dismiss();case 3:n.send($,{data:4});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=5,r.$$eval("#content > div.otp-form",(function(e){return e.map((function(e){return e.innerHTML}))}));case 5:if(!(e.sent.length>0)){e.next=20;break}return o="#passOTP",e.next=10,r.$eval(o,(function(e,t){return e.value=t}),t);case 10:return o="#loginForm > div.row > button",e.next=13,Promise.all([r.click(o),r.waitForNavigation({waitUntil:"load",timeout:0})]);case 13:return e.next=15,et(2e3);case 15:return e.next=17,r.waitForFunction('document.querySelector("#txtSearch") != null');case 17:n.send($,{data:1}),e.next=21;break;case 20:n.send($,{data:3});case 21:e.next=28;break;case 23:e.prev=23,e.t0=e.catch(0),console.log("otp Error",e.t0),n.send(K,{data:-1}),n.send(H,{data:0});case 28:case"end":return e.stop()}}),e,null,[[0,23]])})))).apply(this,arguments)}var nt=function(e){try{return e.match(/[<][t][d][>][^<]+/g)}catch(e){return console.log("get list td tag information error ",e),[""]}},rt=function(e){try{var t=/[^<td>]+/g;return console.log("getTdInformation",e),console.log("getTdInformation match",e.match(t)),e.match(t)}catch(e){console.log()}};function ot(e,t,n,r,o,a,c){try{var i=e[a](c),u=i.value}catch(e){return void n(e)}i.done?t(u):Promise.resolve(u).then(r,o)}function at(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function c(e){ot(a,r,o,c,i,"next",e)}function i(e){ot(a,r,o,c,i,"throw",e)}c(void 0)}))}}function ct(e){return e=null==e?2e3:e,new Promise((function(t){return setTimeout(t,e)}))}function it(e,t,n,r,o){return ut.apply(this,arguments)}function ut(){return(ut=at(regeneratorRuntime.mark((function e(t,n,r,o,a){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{t.cell(n,r).string(o+"").style(a)}catch(e){console.log("e",e)}case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function st(){return(st=at(regeneratorRuntime.mark((function e(t,n,r,o,a,c,i,u,s){var l,p,f,m,d,v;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("numberPhone ",n,"month",o),e.next=4,i.goto(Ue);case 4:return l="#txtSearch",e.next=7,i.$eval(l,(function(e,t){return e.value=t}),n);case 7:return l="#month",e.next=10,i.$eval(l,(function(e,t){return e.value=t}),o);case 10:return l="#Div_Param > div:nth-child(2) > div:nth-child(3) > button",e.next=13,Promise.all([i.click(l)]);case 13:return e.next=15,ct(2e3);case 15:return e.next=17,i.$$eval("#tbody_td_207",(function(e){return e.map((function(e){return e.innerHTML}))}));case 17:return p=e.sent,console.log("dataFromTable is: ",p),JSON.stringify(p)==JSON.stringify([""])?c.send(B,{index:r+1,phone:n}):(f=nt(p[0]),console.log("index",r),m=rt(f[1]),d=rt(f[2]),v=rt(f[3]),it(a,t,1,r,s),it(a,t,2,n,s),it(a,t,3,m[0],s),it(a,t,4,d[0],s),it(a,t,5,v[0],s),c.send(B,{index:r,phone:n}),t++),e.abrupt("return",t);case 23:e.prev=23,e.t0=e.catch(0),console.log("doGetInfomation error ",e.t0);case 26:case"end":return e.stop()}}),e,null,[[0,23]])})))).apply(this,arguments)}const lt=function(e,t,n,r,o,a,c,i,u){return st.apply(this,arguments)};function pt(e,t,n,r,o,a,c){try{var i=e[a](c),u=i.value}catch(e){return void n(e)}i.done?t(u):Promise.resolve(u).then(r,o)}function ft(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function c(e){pt(a,r,o,c,i,"next",e)}function i(e){pt(a,r,o,c,i,"throw",e)}c(void 0)}))}}var mt,dt,vt,gt,ht,yt=n(750),xt=null,wt=n(369),bt=2,Et=function(){var e=ft(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,new Promise(function(){var e=ft(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,yt.launch({args:["--no-sandbox","--proxy-server='direct://'","--proxy-bypass-list=*"],headless:!0,ignoreHTTPSErrors:!0,executablePath:"C:\\Program Files (x86)\\Google\\Chrome\\Application\\chrome.exe"});case 3:r=e.sent,t(r),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),n(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}());case 3:return dt=e.sent,e.next=6,dt.newPage();case 6:(mt=e.sent).setViewport({width:2600,height:3800}),(xt=Ke(t)).receive((function(e){e.on(L,Ot),e.on(W,Pt),e.on(U,kt)})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.error("loi puppteer hoac socket",e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),Ot=function(){var e=ft(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{console.log("login voi username va password",t.username,t.password),Xe(t.username,t.password,xt,mt,null)}catch(e){console.log("login error ",e)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Pt=function(e){try{console.log("Xac thuc voi OTP : ",e.otp),function(e,t,n){tt.apply(this,arguments)}(e.otp,xt,mt)}catch(e){console.log("doOTP error ",e)}},kt=function(){var e=ft(regeneratorRuntime.mark((function e(t){var n,r,o,a,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,console.log("data from client: ",t),n=2e3,r=t.startDate,Nt(t.nameFile,r),o=vt.createStyle({alignment:{vertical:["center"],horizontal:["center"],wrapText:!0},font:{name:"Arial",color:"#4e3861",size:12}}),a=0;case 7:if(!(a<t.listPhone.length)){e.next=22;break}return console.log("Tra cuu so thu ",a," phone ",t.listPhone[a]),new Date,e.next=12,lt(bt,t.listPhone[a].phone,t.listPhone[a].index,r,gt,xt,mt,t.listPhone.length,o);case 12:return c=e.sent,bt=c,e.next=16,Tt(n);case 16:if(a%50!=0){e.next=19;break}return e.next=19,vt.write(ht);case 19:a++,e.next=7;break;case 22:return e.next=24,vt.write(ht);case 24:xt.send(z,{data:2}),bt=2,e.next=31;break;case 28:e.prev=28,e.t0=e.catch(0),console.log("doGetInfor error ",e.t0);case 31:case"end":return e.stop()}}),e,null,[[0,28]])})));return function(t){return e.apply(this,arguments)}}();function Tt(e){return new Promise((function(t){return setTimeout(t,e)}))}function St(){return(St=ft(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{r=t.createStyle({alignment:{vertical:["center"],horizontal:["center"],wrapText:!0},font:{bold:!0,name:"Arial",color:"#4e3861",size:12}}),n.cell(1,1).string("STT").style(r),n.cell(1,2).string("SĐT").style(r),n.cell(1,3).string("BTS_NAME").style(r),n.cell(1,4).string("MA_TINH").style(r),n.cell(1,5).string("TOTAL_TKC").style(r)}catch(e){console.log("e",e)}case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Nt=function(e,t){try{console.log(" file name from client",e),vt=new wt.Workbook,(gt=vt.addWorksheet("Tra cứu")).column(1).setWidth(5),gt.column(2).setWidth(30),gt.column(3).setWidth(30),gt.column(4).setWidth(30),gt.column(5).setWidth(30),function(e,t){St.apply(this,arguments)}(vt,gt);var n=new Date;ht=e+"-Năm "+t+"-Lúc "+n.getHours()+" giờ "+n.getMinutes()+" phút-Ngày "+n.getDate()+" tháng "+(n.getMonth()+1)+" năm "+n.getFullYear()+".xlsx",vt.write(ht)}catch(e){console.log("createFileExcel error ",e)}};const _t=Et;var Rt=t()();Rt.set("port",6786),Rt.use("/static",t().static(o().resolve(__dirname,"public"))),Rt.use(t().json()),Rt.use(p()({origin:"*",credentials:!0})),Rt.use(t().urlencoded({extended:!0})),Rt.all("/*",$e);var jt=n(605).createServer(Rt);_t(jt),jt.listen(Rt.get("port"),(function(){return console.log("######## app running on port 6786 ########")}))})()})();